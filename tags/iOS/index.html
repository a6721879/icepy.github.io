<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tag: iOS | icepy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在生活中奔跑">
<meta property="og:type" content="website">
<meta property="og:title" content="icepy">
<meta property="og:url" content="http://lcepy.github.io/tags/iOS/">
<meta property="og:site_name" content="icepy">
<meta property="og:description" content="在生活中奔跑">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="icepy">
<meta name="twitter:description" content="在生活中奔跑">

  
    <link rel="alternative" href="/atom.xml" title="icepy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="http://7qncz5.com1.z0.glb.clouddn.com/blog/mockingbird.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">icepy</a></h1>
		</hgroup>

		
		<p class="header-subtitle">曾记否，到中流击水，浪遏飞舟！</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/lcepy" title="github">github</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/JavaScript/" style="font-size: 18.00px;">JavaScript</a><a href="/tags/django/" style="font-size: 14.00px;">django</a><a href="/tags/iOS/" style="font-size: 20.00px;">iOS</a><a href="/tags/nodejs/" style="font-size: 12.00px;">nodejs</a><a href="/tags/python/" style="font-size: 10.00px;">python</a><a href="/tags/生活/" style="font-size: 16.00px;">生活</a><a href="/tags/简历/" style="font-size: 10.00px;">简历</a><a href="/tags/经验之谈/" style="font-size: 12.00px;">经验之谈</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://resume.github.io/?lcepy">icepyResume</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">携来百侣曾游,忆往昔峥嵘岁月稠。</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">icepy</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7qncz5.com1.z0.glb.clouddn.com/blog/mockingbird.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">icepy</h1>
			</hgroup>
			
			<p class="header-subtitle">曾记否，到中流击水，浪遏飞舟！</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/lcepy" title="github">github</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-利用AVFoundation实现扫描条码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/06/16/利用AVFoundation实现扫描条码/" class="article-date">
  	<time datetime="2015-06-16T09:39:05.000Z" itemprop="datePublished">6月 16 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/16/利用AVFoundation实现扫描条码/">利用AVFoundation实现扫描条码</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>iOS7中添加了一组原生支持扫描的组件，通过AVCaptureMetaDataOutput可以扫描各式各样的QR码，条形码，你所需要做的就是写好UI，并将它设置为AVCaptureSession的输出，再实现相应的协议即可。而且，这玩意可以跟Passbook相结合，有许多潜力可以实现，官方也非常推荐大家使用这个API。</p>
<blockquote>
<p>import AVFoundation</p>
<p>实现 AVCaptureMetadataOutputObjectsDelegate协议</p>
</blockquote>
<p>要实现这个扫描器，首先需要导入AVFoundation框架，这是一个专门处理音频，视频的框架。</p>
<p>创建一个AV设备，使用AVMediaTypeVideo常量</p>
<pre><code><span class="keyword">let</span> <span class="variable">captureDevice =</span> AVCaptureDevice.defaultDeviceWithMediaType(AVMediaTypeVideo)
</code></pre><p>然后建立一个输入</p>
<pre><code><span class="keyword">let</span> input:AnyObject! = AVCaptureDeviceInput.deviceInputWithDevice(captureDevice, <span class="keyword">error</span>: &amp;<span class="keyword">error</span>)
</code></pre><p>现在，我们来看一看，最关键的部分，创建输出会话，不过在此之前，我们需要先使用AVCaptureSession创建一个会话，将输入端添加到会话中。</p>
<pre><code><span class="keyword">self</span>.captureSession = AVCaptureSession()
<span class="keyword">self</span>.captureSession?.addInput(input <span class="keyword">as</span>! AVCaptureInput)
</code></pre><p>接着，我们开始使用AVCaptureMetadataOutput创建一个输出端</p>
<pre><code><span class="keyword">let</span> <span class="variable">captureMetadataOutput =</span> AVCaptureMetadataOutput()
captureMetadataOutput.setMetadataObjectsDelegate(self, queue: dispatch_get_main_queue())
captureMetadataOutput.<span class="variable">metadataObjectTypes =</span> [AVMetadataObjectTypeEAN13Code,AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeCode128Code,AVMetadataObjectTypeQRCode]
</code></pre><p>指定要实现的扫描常量，添加一个协议，GCD可以使用在主线程中，并把它添加到会话中。</p>
<pre><code><span class="keyword">self</span>.captureSession?.addOutput(captureMetadataOutput)
</code></pre><p>然后我们还需要使用AVCaptureVideoPreviewLayer创建一个画布，用来显示扫描的展示区域，并添加到当前视图的layer中。</p>
<pre><code><span class="keyword">self</span>.videoPreviewLayer = <span class="constant">AVCaptureVideoPreviewLayer</span>(<span class="symbol">session:</span> <span class="keyword">self</span>.captureSession)
<span class="keyword">self</span>.videoPreviewLayer?.videoGravity = <span class="constant">AVLayerVideoGravityResizeAspect</span>
<span class="keyword">self</span>.videoPreviewLayer?.frame = <span class="keyword">self</span>.view.bounds
<span class="keyword">self</span>.view.layer.addSublayer(<span class="keyword">self</span>.videoPreviewLayer)
</code></pre><p>最后启动这个会话</p>
<pre><code><span class="keyword">self</span>.captureSession?.startRunning()
</code></pre><p>到这里，整个扫描条码的程序就已经准备就绪了，但是如果你还需要获取扫描相应的结果，那么需要实现它的协议，并实现func captureOutput(captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [AnyObject]!, fromConnection connection: AVCaptureConnection!) {} 方法。</p>
<p>metadataObjects是一个AnyObject的数组，在这里，还需要进步的判断，获取第一个元素转化为AVMetadataMachineReadableCodeObject，通过type，可以判断扫描的类型，是二维码，还是条形码，还是其他，而值，则是在AVMetadataMachineReadableCodeObject的stringValue属性。</p>
<pre><code><span class="keyword">let</span> metadata = metadataObjects[<span class="number">0</span>] <span class="keyword">as</span>! AVMetadataMachineReadableCodeObject
<span class="comment">//metadata.type</span>
<span class="comment">//metadata.stringValue</span>
</code></pre><p>扫描的Demo可以查看<a href="https://github.com/lcepy/Mockingbird" target="_blank" rel="external">Mockingbird</a></p>
<h2 id="在Objective-C项目中使用">在Objective-C项目中使用</h2>
<p>三步走图片，可查</p>
<p><img src="http://7qncz5.com1.z0.glb.clouddn.com/iOS/bridging-header-file.png" alt=""></p>
<p><img src="http://7qncz5.com1.z0.glb.clouddn.com/iOS/defines-module-yes.png" alt=""></p>
<p><img src="http://7qncz5.com1.z0.glb.clouddn.com/iOS/import-swift-file.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-上架AppStore的经历" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/27/上架AppStore的经历/" class="article-date">
  	<time datetime="2015-05-27T04:43:22.000Z" itemprop="datePublished">5月 27 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/27/上架AppStore的经历/">上架AppStore的经历</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="开发之前的准备">开发之前的准备</h2>
<p>关于证书，以及流程，前人已有总结，请阅读</p>
<ul>
<li><a href="http://www.jianshu.com/p/6c75a6e53605" target="_blank" rel="external">iOS App提交指南(一)</a></li>
<li><a href="http://www.jianshu.com/p/c7cf65911bc1?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=mobile_author_hots&amp;utm_source=recommendation" target="_blank" rel="external">iOS App提交指南(二)-协议、税务和银行业务</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MjM5OTM0MzIwMQ==&amp;mid=206718165&amp;idx=3&amp;sn=860ec99f81da19cd3d6faffe6d85083b#rd" target="_blank" rel="external">iOS证书说明和发布内购流程整理</a></li>
</ul>
<h2 id="准备开发">准备开发</h2>
<ul>
<li>在开发码农周刊应用之前，先写了一份PRD，把需求写清楚，然后利用storyboard画了一个简单的原型。PRD List我用的是<a href="https://trello.com/" target="_blank" rel="external">trello</a></li>
<li>图片资源我统一用Images.xcassets来进行管理</li>
<li><a href="http://pixabay.com/" target="_blank" rel="external">pixabay</a>搜索一些免费的资源</li>
<li><a href="http://makeappicon.com/" target="_blank" rel="external">makeappicon</a>生成app的启动icon</li>
<li><a href="https://icons8.com/" target="_blank" rel="external">icons8</a>下载了一份iOS的icon</li>
<li><a href="https://appscreens.io/" target="_blank" rel="external">appscreens</a>这个工具用于生成需要提交到AppStore审核的预览图片</li>
</ul>
<h2 id="准备提交">准备提交</h2>
<p>在Build Settings Code Signing中设置 Code Signing Identity和Provisioning Profile，用你在apple申请的发布证书和发布描述，然后把Device选择为真机。</p>
<p><img src="http://websources.qiniudn.com/iOS/codsigning.png" alt=""></p>
<p>选择Product中的Archive构建发布版本，可以直接点击Submit to App Store</p>
<p><img src="http://websources.qiniudn.com/iOS/archives.png" alt=""></p>
<h2 id="构建错误与警告">构建错误与警告</h2>
<p>在构建发布版本时Xcode会检测发布App所具备的逻辑，下面是我遇到的错误和警告</p>
<p>error itms -90096 : your binary is not optimized for iphone5 new iPhone apps and app updates submitted must support the 4-inch display on iphone5 and must include a launch image with the -568h size modifier immediately following the<basename> portion of the launch images’ filename. launch images must be png files and located at the top level of your bundle or provided within each. lproj folder if you localize your launch images learn more about iPhone 5 support and app launch images by reviewing the ‘iOS Human interface guidelines at</basename></p>
<p>上传启动动画PNG图片，另外还给出了三个解决方案参考的URL</p>
<p><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html" target="_blank" rel="external">参考一</a><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/LaunchImages.html#//apple_ref/doc/uid/TP40006556-CH22-SW1" target="_blank" rel="external">参考二</a><a href="https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html#//apple_ref/doc/uid/TP40006556-CH27-SW1" target="_blank" rel="external">参考三</a></p>
<p>error itms-4238 redundant binary upload. there already exists a binary upload with build version ‘1’ for train ‘1.0’ at software assets/prereleasesoftwareasset</p>
<p>因为想要提交的版本已经存在，更改build版本号</p>
<p>error itms-90032: invalid image path - no image found at the path referenced under key CFBundleIconFiles:’xxx</p>
<p>存在一个不使用的配置，在Info中删除</p>
<p>WARNING ITMS:iTunes Store operation succeeded with a warning<br>the app references non-public selectors in Payload/manongweekly.app/manongweekly:addContent</p>
<p>查找是否使用了非公用API，一些名字可能会是私有API，最好把名改了</p>
<p>WARNING ITMS 90025:Missing recommended icon file the bundle does not contain an app icon for iPhone/ipodtouch of exactly ‘120x120’pixels in.png format for iOS versions &gt;=7.0</p>
<p>添加76，76@2x的图标PNG</p>
<h2 id="查看被拒原因与加急">查看被拒原因与加急</h2>
<p>在<a href="https://developer.apple.com/membercenter/index.action" target="_blank" rel="external">Member Center</a>中应用审核的最下面，有一个解决方案中心，点击解决方案中心，可以查看被拒原因，审核人员会给你罗列以及解决方案参考。</p>
<p>如果应用审核通过了，在使用的过程中发现有重大的bug导致应用crash，可以申请加急，非常快，<a href="https://developer.apple.com/appstore/contact/?topic=expedite%3E" target="_blank" rel="external">contact</a></p>
<p>最后《码农周刊》iOS客户端愉快的上线了</p>
<p><a href="https://itunes.apple.com/cn/app/yuan-yi-yue/id990227579?l=en&amp;mt=8" target="_blank" rel="external"><img src="https://camo.githubusercontent.com/770175f6c01d89c84a020706126a9e6399ff76c4/68747470733a2f2f696d672e736869656c64732e696f2f636f636f61706f64732f702f4b696e676669736865722e7376673f7374796c653d666c6174" alt="AppStore"></a>  <a href="https://github.com/lcepy/manong-reading" target="_blank" rel="external"><img src="https://camo.githubusercontent.com/b0224997019dec4e51d692c722ea9bee2818c837/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d6173686170652f6170697374617475732e737667" alt="manong-reading"></a></p>
<p><a href="https://itunes.apple.com/cn/app/yuan-yi-yue/id990227579?l=en&amp;mt=8" target="_blank" rel="external">Download on the App Store</a> </p>
<p><a href="https://github.com/lcepy/manong-reading" target="_blank" rel="external">checking on the manong-reading project </a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-使用storyboard设计app原型" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/23/使用storyboard设计app原型/" class="article-date">
  	<time datetime="2015-05-23T12:48:13.000Z" itemprop="datePublished">5月 23 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/23/使用storyboard设计app原型/">使用storyboard设计app原型</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天我想写一下自己利用storyboard+swift快速设计一款App原型的经历，这是突然发现Xcode的强大之处带来的优势，你可以设计一个如下图的原型。</p>
<p><img src="http://websources.qiniudn.com/iOS/prototype.png" alt=""></p>
<p>先创建一个项目＋创建一个storyboard＋拖拽一个ViewController到storyboard中（默认你知道怎么创建一个项目，怎么新建一个storyboard，以及怎么拖拽一个ViewController到storyboard中）</p>
<p><img src="http://websources.qiniudn.com/iOS/storyboard.png" alt=""></p>
<p>给ViewController设置启动，这个设置针对storyboard是唯一的，也就是只能设置一个</p>
<p><img src="http://websources.qiniudn.com/iOS/initViewController.png" alt=""></p>
<p>给ViewController设置身份ID(identity)，它应该是唯一的，而且后期如果有多个storyboard时场景的跳转会使用到</p>
<pre><code><span class="keyword">var</span> sd:<span class="type">UIStoryboard</span> = <span class="type">UIStoryboard</span>(name: <span class="string">"Cycling"</span>, bundle: <span class="built_in">nil</span>)
<span class="keyword">var</span> cyc:<span class="type">CyclingInitViewController</span> = sd.instantiateViewControllerWithIdentifier(<span class="string">"CyclingInit"</span>) <span class="keyword">as</span>! <span class="type">CyclingInitViewController</span>
<span class="keyword">self</span>.navigationController?.pushViewController(cyc, animated: <span class="built_in">true</span>)
</code></pre><p><img src="http://websources.qiniudn.com/iOS/identity.png" alt=""></p>
<p>给ViewController应用一个NavgationController，每一个视图控制器中都有一个navigationController和navigationItem。（注意：前者应该算一个公共的，后者navigationItem是每个控制器自身独有的）在使用的时候需要注意这些，以保证标题，以及导航栏上的bar可以设置正确</p>
<p><img src="http://websources.qiniudn.com/iOS/navigationC.png" alt=""></p>
<p>拖拽一个label到视图中，我们可以通过属性板来设置它的一些属性，比如字体大小，颜色，是否居中。属性有很多，基本上和代码中的UILabel可以一一对应起来。</p>
<p><img src="http://websources.qiniudn.com/iOS/attributes.png" alt=""></p>
<p>在Size面板中可以调整x,y以及高宽</p>
<p><img src="http://websources.qiniudn.com/iOS/size.png" alt=""></p>
<p>接下来应该是一个最重要的活儿了，autolayout技术对视图进行约束，这是接下来想对UI进行正确排版所使用的技术，关于它的细节问题，你需要慢慢了解，我只能告诉你怎样在storyboard中利用Xcode给我们提供的工具去连线，去进行约束。</p>
<p>第一种方式，利用右下角的小三角形，对约束进行重置（简单的约束，Xcode非常智能的帮你排版了）</p>
<p><img src="http://websources.qiniudn.com/iOS/constraintsimage.png" alt=""></p>
<p>第二种方式，利用连线去设置constraints，属性比较多，可以记一下，上下左右高宽都有，还有居中什么的</p>
<p><img src="http://websources.qiniudn.com/iOS/constraints3.png" alt=""></p>
<p>第三种方式，利用代码去设置constraints（一般来说，我们是在设计原型，如果用代码…感觉杀鸡焉用牛刀了）推荐一个库<a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">Masonry</a>（注明：现在还没有swift版的）</p>
<p>最后大家看看我们设计的一个结果吧，源代码可以在Github上查看<a href="https://github.com/lcepy/storyboard-app-prototype" target="_blank" rel="external">storyboard-app-prototype</a></p>
<p><img src="http://websources.qiniudn.com/iOS/result.png" alt=""></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-NSDictionary" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/16/NSDictionary/" class="article-date">
  	<time datetime="2015-05-16T11:20:01.000Z" itemprop="datePublished">5月 16 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/16/NSDictionary/">NSDictionary</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用字典，能很好的组织数据，OC中的字典有三种方式</p>
<pre><code><span class="comment">//创建字典</span>
<span class="built_in">NSDictionary</span> *dic = [[<span class="built_in">NSDictionary</span> alloc] initWithObjectsAndKeys:<span class="string">@"value"</span>,<span class="string">@"key"</span>,<span class="string">@"github"</span>,<span class="string">@"build"</span>, <span class="literal">nil</span>];
<span class="built_in">NSDictionary</span> *dic1 = @{<span class="string">@"key1"</span>:<span class="string">@"value1"</span>};
<span class="built_in">NSDictionary</span> *dic2 = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:<span class="string">@"value2"</span>,<span class="string">@"key2"</span>, <span class="literal">nil</span>];
</code></pre><p>包含多少个键值对</p>
<pre><code><span class="comment">//包含多少个键值对</span>
<span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"%zd"</span>,dic.count);</span>
</code></pre><p>通过已知的key名来获取值</p>
<pre><code><span class="comment">//已知key来获取值</span>
NSString *<span class="keyword">value</span> = [dic objectForKey:<span class="string">@"key"</span>];
NSLog(<span class="string">@"%@"</span>,<span class="keyword">value</span>);
</code></pre><p>获取所有的key和获取所有的值</p>
<pre><code><span class="comment">//获取所有的key名或者值，返回一个不可变数组</span>
<span class="built_in">NSArray</span> *keys = [dic allKeys];
<span class="built_in">NSArray</span> *values = [dic allValues];
<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,keys);
<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,values);
</code></pre><p>通过一个数组key获取值</p>
<pre><code><span class="built_in">NSArray</span> *vals = [dic objectsForKeys:@[<span class="string">@"key"</span>] notFoundMarker:<span class="string">@"not"</span>];
<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,vals);
</code></pre><p>遍历</p>
<pre><code>[dic enumerateKeysAndObjectsUsingBlock:^(<span class="keyword">id</span> key, <span class="keyword">id</span> obj, <span class="built_in">BOOL</span> *stop) {
    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,key);
    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,obj);
}];
</code></pre><p>排序</p>
<pre><code><span class="built_in">NSArray</span> *kesArray =  [dic keysSortedByValueUsingComparator:^NSComparisonResult(<span class="keyword">id</span> obj1, <span class="keyword">id</span> obj2) {
    <span class="built_in">NSString</span> *ke1 = obj1;
    <span class="built_in">NSString</span> *ke2 = obj2;
    <span class="keyword">return</span> [ke1 compare:ke2];
}];
</code></pre><p>过滤</p>
<pre><code>[dic keysOfEntriesPassingTes<span class="variable">t:</span>&lt;#^BOOL(id key, id obj, BOOL *<span class="keyword">stop</span>)predicate#&gt;];
</code></pre><p>Mutable版的字典，多了增删的方法</p>
<pre><code><span class="built_in">NSMutableDictionary</span> *dicmutable = [<span class="built_in">NSMutableDictionary</span> dictionaryWithDictionary:dic];
</code></pre><p>添加</p>
<pre><code>[dicmutable <span class="keyword">set</span>Object:@<span class="string">"icepy"</span> <span class="keyword">for</span>Key:@<span class="string">"io"</span>];
NSLog(@<span class="string">"%@"</span>,dicmutable);
</code></pre><p>删除</p>
<pre><code><span class="attr_selector">[dicmutable removeObjectForKey:@"build"]</span>;
<span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"%@"</span>,dicmutable);</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
    <article id="post-iOS动画基础" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/10/iOS动画基础/" class="article-date">
  	<time datetime="2015-05-09T17:02:06.000Z" itemprop="datePublished">5月 10 2015</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/10/iOS动画基础/">iOS动画基础</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>貌似在哪个领域里，动画的实现都赋予了软件非常生动的交互，所以我们必须要掌握并学好它。在学习动画之前，首推<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514" target="_blank" rel="external">Core Animation Programming Guide</a>核心动画编程指南，去了解一下官方的术语，定义，以及指导，这很有帮助。</p>
<p>顾名思义，动画也就是让我们的view可以动起来，所谓的view实际上都会继承于UIView，而每一个UIView都有一个CALayer对象，它们两个是分开的，分别用于不同的地方。可以看见的是，UIView用于显示，CALayer用于绘制。（注明：CALayer属于QuartzCore框架）</p>
<p>UIView自身（注明：UIView属于UIKit框架）会有描述位置的信息，比如frame，transform。在使用一些比较简单的动画时，我们应该首选考虑的是使用UIView提供的一些方法，去改变frame，transform等属性。</p>
<pre><code><span class="title">[UIView animateWithDuration:1.6 animations:^{

}]</span><span class="comment">;</span>
</code></pre><p>对于高度复杂一些的动画，就需要我们对Core Animation整个的熟悉和了解了。这里，我建议先阅读一下<a href="http://objccn.io/issue-12-1/" target="_blank" rel="external">动画理解</a>，把一些概念性的东西了解清楚。比如Core Animation维护的层次结构，什么叫模型层树(model layer tree)，什么叫表现层树(presentation layer tree)，而且你务必要理解，当把动画添加到一个layer的时候，是不直接修改其属性的。</p>
<p>在清楚这些概念性的问题后，你可以去学习一些动画类了，比如CABasicAnimation，CATransform3D，CAKeyframeAnimation,CAAnimationGroup,CAAnimation，另外你务必要记住一点，CAAnimation是这些动画类的鼻祖(它是一个抽象类，不能直接使用)，而且要搞清楚CALayer。</p>
<p>举例一些简单的例子</p>
<p><strong>使用CABasicAnimation</strong></p>
<pre><code>CABasicAnimation *<span class="variable">animation =</span> [CABasicAnimation animation];
animation.<span class="variable">keyPath =</span> @<span class="string">"position.x"</span>;
animation.<span class="variable">duration =</span> <span class="number">1</span>;
animation.<span class="variable">fromValue =</span> @<span class="number">50</span>;
animation.<span class="variable">toValue =</span> @<span class="number">250</span>;
[view.layer addAnimation:animation forKey:@<span class="string">"left"</span>];
</code></pre><p>为了验证动画究竟修改了那个地方的值，我打印了一下view的frame，NSLog(@”%@”,NSStringFromCGRect(view.frame))，这里可以看的出来，view的frame值没有发生改变，而且在模拟器中，动画结束了，view又回到了原来的位置。说明啊，动画的执行和view的渲染是分开的，如果你还不理解，请继续阅读《核心动画编程指南》或者简单的《动画理解》。</p>
<p>如果我们不想动画结束后view回到原来的位置，可以使用</p>
<pre><code>animation.<span class="variable">fillMode =</span> kCAFillModeForwards;
animation.<span class="variable">removedOnCompletion =</span> NO;
</code></pre><p><strong>使用CAKeyframeAnimation</strong></p>
<pre><code><span class="constant">CAKeyframeAnimation</span> *animation = [<span class="constant">CAKeyframeAnimation</span> animation];
animation.keyPath = @<span class="string">"position.x"</span>;
animation.values = @[<span class="variable">@0</span>,<span class="variable">@10</span>,@-<span class="number">10</span>,<span class="variable">@10</span>,<span class="variable">@0</span>];
animation.keyTimes = @[ <span class="variable">@0</span>, @(<span class="number">1</span> / <span class="number">6.0</span>), @(<span class="number">3</span> / <span class="number">6.0</span>), @(<span class="number">5</span> / <span class="number">6.0</span>), <span class="variable">@1</span> ];
animation.duration = <span class="number">0</span>.<span class="number">4</span>;
animation.additive = <span class="constant">YES</span>;
[view.layer <span class="symbol">addAnimation:</span>animation <span class="symbol">forKey:</span>@<span class="string">"shake"</span>];
</code></pre><p><strong>使用CAAnimationGroup</strong></p>
<pre><code>CABasicAnimation *<span class="variable">right =</span> [CABasicAnimation animation];
right.<span class="variable">keyPath =</span> @<span class="string">"position.x"</span>;
right.<span class="variable">duration =</span> <span class="number">1</span>;
right.<span class="variable">toValue =</span> @<span class="number">250</span>;
right.<span class="variable">timingFunction =</span> [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];

CABasicAnimation *<span class="variable">top =</span> [CABasicAnimation animation];
top.<span class="variable">keyPath =</span> @<span class="string">"position.y"</span>;
top.<span class="variable">duration =</span> <span class="number">1</span>;
top.<span class="variable">toValue =</span> @<span class="number">10</span>;
right.<span class="variable">timingFunction =</span> [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];

CAAnimationGroup *<span class="variable">animationsGroup =</span> [CAAnimationGroup animation];
animationsGroup.<span class="variable">animations =</span> @[right,top];
[view.layer addAnimation:animationsGroup forKey:@<span class="string">"group"</span>];
</code></pre><p>阅读资料：</p>
<ul>
<li><a href="http://objccn.io/issue-12/" target="_blank" rel="external">#12动画</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Reference/CoreAnimation_framework/index.html#//apple_ref/doc/uid/TP40004513" target="_blank" rel="external">Core Animation Reference Collection</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>






  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/tags/iOS/page/2/">2</a><a class="page-number" href="/tags/iOS/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/tags/iOS/page/5/">5</a><a class="extend next" rel="next" href="/tags/iOS/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 icepy
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/mobile.js" type="text/javascript"></script>

<script src="/js/main.js" type="text/javascript"></script>






<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
</body>
</html>